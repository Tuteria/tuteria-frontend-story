var howLongUntilLunch=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}Object.defineProperty(e,"__esModule",{value:!0}),e.bodyOpenClassName=e.portalClassName=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=require("react"),p=R(d),m=R(require("react-dom")),y=R(require("prop-types")),b=R(require("./ModalPortal")),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(require("../helpers/ariaAppHider")),v=require("../helpers/safeHTMLElement"),O=R(v),g=require("react-lifecycles-compat");function R(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==t(n)&&"function"!=typeof n?e:n}var C=e.portalClassName="ReactModalPortal",S=e.bodyOpenClassName="ReactModal__Body--open",j=v.canUseDOM&&void 0!==m.default.createPortal,w=function(){return j?m.default.createPortal:m.default.unstable_renderSubtreeIntoContainer};function k(e){return e()}var P=function(e){function n(){var e,t,r;E(this,n);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return t=r=_(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.removePortal=function(){!j&&m.default.unmountComponentAtNode(r.node);var e=k(r.props.parentSelector);e&&e.contains(r.node)?e.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(e){r.portal=e},r.renderPortal=function(e){var t=w()(r,p.default.createElement(b.default,s({defaultStyles:n.defaultStyles},e)),r.node);r.portalRef(t)},_(r,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+t(n));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),f(n,[{key:"componentDidMount",value:function(){v.canUseDOM&&(j||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,k(this.props.parentSelector).appendChild(this.node),!j&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:k(e.parentSelector),nextParent:k(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(v.canUseDOM){var r=this.props,o=r.isOpen,a=r.portalClassName;e.portalClassName!==a&&(this.node.className=a);var l=n.prevParent,i=n.nextParent;i!==l&&(l.removeChild(this.node),i.appendChild(this.node)),(e.isOpen||o)&&!j&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(v.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return v.canUseDOM&&j?(!this.node&&j&&(this.node=document.createElement("div")),w()(p.default.createElement(b.default,s({ref:this.portalRef,defaultStyles:n.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){h.setElement(e)}}]),n}(d.Component);P.propTypes={isOpen:y.default.bool.isRequired,style:y.default.shape({content:y.default.object,overlay:y.default.object}),portalClassName:y.default.string,bodyOpenClassName:y.default.string,htmlOpenClassName:y.default.string,className:y.default.oneOfType([y.default.string,y.default.shape({base:y.default.string.isRequired,afterOpen:y.default.string.isRequired,beforeClose:y.default.string.isRequired})]),overlayClassName:y.default.oneOfType([y.default.string,y.default.shape({base:y.default.string.isRequired,afterOpen:y.default.string.isRequired,beforeClose:y.default.string.isRequired})]),appElement:y.default.instanceOf(O.default),onAfterOpen:y.default.func,onRequestClose:y.default.func,closeTimeoutMS:y.default.number,ariaHideApp:y.default.bool,shouldFocusAfterRender:y.default.bool,shouldCloseOnOverlayClick:y.default.bool,shouldReturnFocusAfterClose:y.default.bool,preventScroll:y.default.bool,parentSelector:y.default.func,aria:y.default.object,data:y.default.object,role:y.default.string,contentLabel:y.default.string,shouldCloseOnEsc:y.default.bool,overlayRef:y.default.func,contentRef:y.default.func,id:y.default.string,overlayElement:y.default.func,contentElement:y.default.func},P.defaultProps={isOpen:!1,portalClassName:C,bodyOpenClassName:S,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return p.default.createElement("div",e,t)},contentElement:function(e,t){return p.default.createElement("div",e,t)}},P.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,g.polyfill)(P),e.default=P;var M,x=c(Object.freeze({__proto__:null})),A=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=x)&&n.__esModule?n:{default:n};t.default=r.default,e.exports=t.default}(M={exports:{}},M.exports),M.exports),N={content:{top:"50%",left:"45%",right:"auto",bottom:"auto",marginRight:"-50%",width:"40%",transform:"translate(-50%, -50%)"},overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.75)",zIndex:2e3}},q={parent:{marginBottom:20},FormGroup:{marginBottom:10},label:{marginRight:10,marginBottom:10,width:"15%",display:"inline-block"},input:{width:"70%"}},D=u(A),T=function(e){var t=e.label,n=e.children;return React.createElement("div",{style:q.FormGroup,className:"form-row field-first_name"},React.createElement("div",null,React.createElement("label",{style:q.label},t),n))},U=function(e){var t=e.render,n=e.children,r=l(React.useState(!1),2),o=r[0],a=r[1];function i(e){e.preventDefault(),a(!1)}return React.createElement(React.Fragment,null,t((function(){a(!0)})),React.createElement(D,{isOpen:o,onAfterOpen:function(){},onRequestClose:i,style:N,ariaHideApp:!1,contentLabel:"Example Modal"},n(i)))},F=function(e){var t=e.node,n=void 0===t?"a":t,r=e.children,l=a(e,["node","children"]);return React.createElement(n,o(o({},l),{},{className:"button nowrap",style:{cursor:"pointer",padding:"7px",marginRight:"10px"}}),r)},I=function(e){var t=e.content,r=e.request_id,a=l(React.useState(!1),2),i=a[0],u=a[1],c=l(React.useState(t),2),s=c[0],f=c[1],d=l(React.useState({remark:t,action:""}),2),p=d[0],m=d[1],y=React.useRef(),b=function(){u(!0)},h=function(e,t){m(o(o({},p),{},n({},e,t)))},v=function(){y.current=setTimeout((function(){u(!1)}),1e3)};return React.createElement(U,{render:function(e){return React.createElement(React.Fragment,null,React.createElement("p",{onMouseOver:b,onMouseOut:v},s),i?React.createElement(F,{onClick:e},"Update Remark"):null)}},(function(e){return React.createElement(React.Fragment,null,React.createElement("fieldset",{className:"module aligned "},React.createElement("h2",{style:q.parent},"Update Remark"),React.createElement(T,{label:"Action"},React.createElement("select",{style:q.input,onChange:function(e){return h("action",e.target.value)},value:p.action},React.createElement("option",{value:""},"Select Action"),React.createElement("option",{value:"profile_to_client"},"Send profile to client"),React.createElement("option",{value:"activity_log"},"Log calls/sms/email"),React.createElement("option",{value:"call_client_later"},"Contact client later"),React.createElement("option",{value:"generic"},"Generic action"))),React.createElement(T,{label:"Remark:"},"call_client_later"===p.action?React.createElement("input",{type:"date",style:q.input,value:p.remark,className:"vTextField",min:(t=new Date,"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())),onChange:function(e){return h("remark",e.target.value)}}):React.createElement("textarea",{rows:4,style:q.input,value:p.remark,className:"vTextField",onChange:function(e){return h("remark",e.target.value)}}))),React.createElement("div",{class:"submit-row"},2!==Object.keys(p).map((function(e){return p[e]})).filter((function(e){return e.trim().length>0})).length?null:React.createElement("input",{onClick:function(t){!function(e,t){e.preventDefault();var n=new Request("".concat(window.REMARK_URL).concat(r,"/"),{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});fetch(n).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(n){console.log(n),f(n.content),t(e)}))}(t,e)},value:"Update Remark",class:"default",type:"submit"}),React.createElement("p",{class:"deletelink-box"},React.createElement("a",{href:"#",onClick:e,class:"deletelink"},"Close Modal"))));var t}))};return window.remarkImplementation=function(){Array.from(document.querySelectorAll("td.field-remarks")).forEach((function(e){var t=e.textContent,n=$(e).siblings().find("input[name=_selected_action]").val();ReactDOM.render(React.createElement(I,{content:t,request_id:n}),e)}))},e.remarkImplementation=function(){Array.from(document.querySelectorAll("td.field-remarks")).forEach((function(e){var t=e.textContent,n=$(e).siblings().find("input[name=_selected_action]").val();ReactDOM.render(React.createElement(I,{content:t,request_id:n}),e)}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
